<form >
<!-- <mat-card>
    <mat-card-content>
        <mat-chip-list aria-label="Orders">         
          <mat-chip color="accent" *ngFor="let list of consolidatedList">{{list.alias}}:{{list.count}}</mat-chip>
        </mat-chip-list>
    </mat-card-content>
</mat-card> -->
<mat-card>
  <mat-card-title>
    Deliveries
    <mat-icon title="Print" (click)="callPrintModal()" class="print-right">print</mat-icon>
    <mat-icon title="Consolidated view" (click)="showConsolidated()" class="print-right">assessment</mat-icon>
  </mat-card-title>
  <mat-card-content>
    <section class="example-section">
        <mat-form-field class="example-margin">
            <input matInput name="searKey" [(ngModel)]="searKey" (keyup)="addEvent()" placeholder="Filter">
            <button mat-icon-button matSuffix (click)="clear()">
              <mat-icon>{{searKey?'clear':''}}</mat-icon>
              </button>
        </mat-form-field>
        <mat-form-field class="example-margin">
            <mat-select name="selRoute" [(ngModel)]="selRoute" (selectionChange)="addEvent()" placeholder="Route" >
                <mat-option *ngFor="let r of routes" [value]="r.key">{{r.value}}</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field class="example-margin">
          <input matInput [max]="maxToDate" [matDatepicker]="picker" placeholder="Choose a date" name="delDate" (dateInput)="addEvent()" [(ngModel)]="delDate">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
    </section>
    <mat-accordion class="example-headers-align">
      <ng-container *ngFor="let row of deliveryList;let i = index">
        <mat-expansion-panel [expanded]="step === i" (opened)="setStep(i)" >            
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{row._id.customer.customerName}}
            </mat-panel-title>
            <mat-panel-description>
              <span>&nbsp;</span>
              <span *ngIf="row._id.orders">Order Received</span>
              <mat-icon>account_circle</mat-icon>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <mat-chip-list *ngIf="row._id.orders">
              <mat-chip *ngFor="let order of row.details">{{order.products.alias}}: {{order.prod_quan}} </mat-chip>                                           
          </mat-chip-list>   
          <div class="example-button-row">        
            <button mat-stroked-button color="warn" (click)="editOrder(row)">Edit</button>      
          </div> 
          <mat-action-row>
            <button mat-button color="warn" *ngIf="i!=0" (click)="prevStep()">Previous</button>
            <button mat-button color="primary" *ngIf="i != deliveryList.length - 1" (click)="nextStep()">Next</button>
          </mat-action-row> 
        </mat-expansion-panel>
      </ng-container>
    </mat-accordion>
    <br>
    <button mat-raised-button color="primary"  (click)="placeOrder()">Place Order</button>
  </mat-card-content>
</mat-card>
</form>